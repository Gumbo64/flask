{% extends 'base.html' %}

{% block header %}
<h1>Chatroom</h1>
<h2>Signed in as {{ username }}</h2>
{% endblock %}



{% block text %}
<!doctype html>
<title>jQuery Example</title>
<script type="text/javascript"
  src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script type="text/javascript">
  var $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
</script>
<script type="text/javascript">
var intervalID = setInterval(update_values,5000);
  function update_values() {
      $.getJSON($SCRIPT_ROOT + '/_chatroom',

      function(data) {
        $('#totaltext').text(data.totaltext);
        console.log(data)
      });

    };

   
    
    
    function stopTextColor() {
      clearInterval(intervalID);
    }
    
</script>
<body onload="update_values();">
<h1>Chatroom</h1>
<p>
    <span id="totaltext">?</span>
</p>
<script>
document.getElementById("totaltext").innerHTML;
</script>


{% endblock %}

{% block image %}
<form method="POST" action="{{ url_for('chatroom') }}">
    {{ form.csrf_token }}
    {{ form.comment.label}}
    {{ form.comment }}
    <br>
    <input type="submit" value="Comment">
{% endblock %}